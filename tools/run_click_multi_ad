#!/bin/bash
#
# run click using the xtransport module (datagram/chunk/stream support)
#
# all host and router devices run from the same click instance using
#  virtual networks for communication
# host0 and router0 are on the 172.0.0.0/24 network (fake0)
# host1 and router1 are on the 192.0.0.0/24 network (fake1)

NAME=`basename $0`
CLICK=../click-2.0/userlevel/click
SCRIPT=../click-2.0/conf/xia_test_topology_1.click
SNAME=`basename $SCRIPT`
VERBOSE="0"

help ()
{
	cat << EOH

usage: $NAME [-qv]
where:
  -q runs click silently (default)
  -v prints click debug messages to stdout

EOH
	exit 0
}

while getopts ":qvh" opt; do
	case $opt in
		q)
			VERBOSE="0"
			;;
		v)
			VERBOSE="1"
			;;
		h)
			help
			;;
		\?)
			printf "\nInvalid option: -$OPTARG\n" >&2
			help
			;;
	esac
done

if [ $VERBOSE -eq "0" ]; then
	exec &> /dev/null
fi


printf "\nrunning click using $SNAME\n\n"

sudo $CLICK -R $SCRIPT
