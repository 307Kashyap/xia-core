#!/bin/sh

if [ "$DEBUG" != "" ] ; then
	export CXXFLAGS="-DDEBUG -ggdb"
	export CFLAGS="-Wall -Wextra -DDEBUG -ggdb"
fi

if [ ! -f .configured ] ; then
	echo Configuring Click..... 	
    
	OPTFLAGS=""
	if [ "$TARCH" = "mips" ] ; then # target architecture argument
		OPTFLAGS="--host=mips-linux --libdir=/opt/buildroot-2013.11/output/host/usr/lib --includedir=/opt/buildroot-2013.11/output/host/usr/include prefix=/tmp/usb/bin/"
	fi

	./configure CXXFLAGS="$CXXFLAGS" LDFLAGS="$LDFLAGS" $OPTFLAGS --enable-tools=no --disable-linuxmodule --enable-warp9 --enable-user-multithread --enable-userlevel --enable-multithread=24  --enable-ip6 --disable-ipsec --disable-analysis --disable-app --disable-aqm --disable-test --disable-threads --disable-icmp --disable-tcpudp  "$*"

else 


	touch .configured
fi
